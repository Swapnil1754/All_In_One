!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/cdk/a11y"),require("@angular/forms"),require("@angular/material/core"),require("@angular/material/form-field"),require("@angular/cdk/coercion")):"function"==typeof define&&define.amd?define("ngx-mat-file-input",["exports","@angular/core","@angular/cdk/a11y","@angular/forms","@angular/material/core","@angular/material/form-field","@angular/cdk/coercion"],t):t((e=e||self)["ngx-mat-file-input"]={},e.ng.core,e.ng.cdk.a11y,e.ng.forms,e.ng.material.core,e.ng.material["form-field"],e.ng.cdk.coercion)}(this,(function(e,t,n,o,r,i,a){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function u(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function p(e,t){return function(n,o){t(n,o,e)}}function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var c,f=new t.InjectionToken("ngx-mat-file-input.config"),d=function(){},y=function(){function e(e,t){void 0===t&&(t=", "),this._files=e,this.delimiter=t,this._fileNames=(this._files||[]).map((function(e){return e.name})).join(t)}return Object.defineProperty(e.prototype,"files",{get:function(){return this._files||[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fileNames",{get:function(){return this._fileNames},enumerable:!0,configurable:!0}),e}(),h=function(e,t,n,o){this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=n,this.ngControl=o},g=r.mixinErrorState(h),m=function(e){function c(t,n,o,r,i,a,l){var u=e.call(this,r,a,l,i)||this;return u.fm=t,u._elementRef=n,u._renderer=o,u._defaultErrorStateMatcher=r,u.ngControl=i,u._parentForm=a,u._parentFormGroup=l,u.focused=!1,u.controlType="file-input",u.autofilled=!1,u._required=!1,u.accept=null,u.id="ngx-mat-file-input-"+f.nextId++,u.describedBy="",u._onChange=function(e){},u._onTouched=function(){},null!=u.ngControl&&(u.ngControl.valueAccessor=u),t.monitor(n.nativeElement,!0).subscribe((function(e){u.focused=!!e,u.stateChanges.next()})),u}var f;return function(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(c,e),f=c,c.prototype.setDescribedByIds=function(e){this.describedBy=e.join(" ")},Object.defineProperty(c.prototype,"value",{get:function(){return this.empty?null:new y(this._elementRef.nativeElement.value||[])},set:function(e){e&&(this.writeValue(e),this.stateChanges.next())},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){this._placeholder=e,this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"empty",{get:function(){return!this._elementRef.nativeElement.value||0===this._elementRef.nativeElement.value.length},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"shouldLabelFloat",{get:function(){return this.focused||!this.empty||void 0!==this.valuePlaceholder},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"required",{get:function(){return this._required},set:function(e){this._required=a.coerceBooleanProperty(e),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"isDisabled",{get:function(){return this.disabled},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"disabled",{get:function(){return this._elementRef.nativeElement.disabled},set:function(e){this.setDisabledState(a.coerceBooleanProperty(e)),this.stateChanges.next()},enumerable:!0,configurable:!0}),c.prototype.onContainerClick=function(e){"input"===e.target.tagName.toLowerCase()||this.disabled||(this._elementRef.nativeElement.querySelector("input").focus(),this.focused=!0,this.open())},Object.defineProperty(c.prototype,"fileNames",{get:function(){return this.value?this.value.fileNames:this.valuePlaceholder},enumerable:!0,configurable:!0}),c.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",e instanceof y?e.files:null)},c.prototype.registerOnChange=function(e){this._onChange=e},c.prototype.registerOnTouched=function(e){this._onTouched=e},c.prototype.clear=function(e){e&&(e.preventDefault(),e.stopPropagation()),this.value=new y([]),this._elementRef.nativeElement.querySelector("input").value=null,this._onChange(this.value)},c.prototype.change=function(e){var t=e.target.files,n=[];if(t)for(var o=0;o<t.length;o++)n.push(t[o]);this.value=new y(n),this._onChange(this.value)},c.prototype.blur=function(){this.focused=!1,this._onTouched()},c.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},c.prototype.ngOnInit=function(){this.multiple=a.coerceBooleanProperty(this.multiple)},c.prototype.open=function(){this.disabled||this._elementRef.nativeElement.querySelector("input").click()},c.prototype.ngOnDestroy=function(){this.stateChanges.complete(),this.fm.stopMonitoring(this._elementRef.nativeElement)},c.prototype.ngDoCheck=function(){this.ngControl&&this.updateErrorState()},c.nextId=0,c.ctorParameters=function(){return[{type:n.FocusMonitor},{type:t.ElementRef},{type:t.Renderer2},{type:r.ErrorStateMatcher},{type:o.NgControl,decorators:[{type:t.Optional},{type:t.Self}]},{type:o.NgForm,decorators:[{type:t.Optional}]},{type:o.FormGroupDirective,decorators:[{type:t.Optional}]}]},u([t.Input(),s("design:type",Object)],c.prototype,"autofilled",void 0),u([t.Input(),s("design:type",String)],c.prototype,"valuePlaceholder",void 0),u([t.Input(),s("design:type",Boolean)],c.prototype,"multiple",void 0),u([t.Input(),s("design:type",Object)],c.prototype,"accept",void 0),u([t.Input(),s("design:type",r.ErrorStateMatcher)],c.prototype,"errorStateMatcher",void 0),u([t.HostBinding(),s("design:type",Object)],c.prototype,"id",void 0),u([t.HostBinding("attr.aria-describedby"),s("design:type",Object)],c.prototype,"describedBy",void 0),u([t.Input(),s("design:type",Object),s("design:paramtypes",[Object])],c.prototype,"value",null),u([t.Input(),s("design:type",Object),s("design:paramtypes",[Object])],c.prototype,"placeholder",null),u([t.HostBinding("class.mat-form-field-should-float"),s("design:type",Object),s("design:paramtypes",[])],c.prototype,"shouldLabelFloat",null),u([t.Input(),s("design:type",Boolean),s("design:paramtypes",[Boolean])],c.prototype,"required",null),u([t.HostBinding("class.file-input-disabled"),s("design:type",Object),s("design:paramtypes",[])],c.prototype,"isDisabled",null),u([t.Input(),s("design:type",Boolean),s("design:paramtypes",[Boolean])],c.prototype,"disabled",null),u([t.HostListener("change",["$event"]),s("design:type",Function),s("design:paramtypes",[Event]),s("design:returntype",void 0)],c.prototype,"change",null),u([t.HostListener("focusout"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],c.prototype,"blur",null),c=f=u([t.Component({selector:"ngx-mat-file-input",template:'<input #input type="file" [attr.multiple]="multiple? \'\' : null" [attr.accept]="accept">\n<span class="filename" [title]="fileNames">{{ fileNames }}</span>\n',providers:[{provide:i.MatFormFieldControl,useExisting:f}],styles:[":host{display:inline-block;width:100%}:host:not(.file-input-disabled){cursor:pointer}input{width:0;height:0;opacity:0;overflow:hidden;position:absolute;z-index:-1}.filename{display:inline-block;text-overflow:ellipsis;overflow:hidden;width:100%}"]}),p(4,t.Optional()),p(4,t.Self()),p(5,t.Optional()),p(6,t.Optional()),s("design:paramtypes",[n.FocusMonitor,t.ElementRef,t.Renderer2,r.ErrorStateMatcher,o.NgControl,o.NgForm,o.FormGroupDirective])],c)}(g),b=function(){function e(e){this.config=e,this.unit=e?e.sizeUnit:"Byte"}return e.prototype.transform=function(e,t){return parseInt(e,10)>=0&&(e=this.formatBytes(+e,+t)),e},e.prototype.formatBytes=function(e,t){if(0===e)return"0 "+this.unit;var n=this.unit.charAt(0),o=t||2,r=[this.unit,"K"+n,"M"+n,"G"+n,"T"+n,"P"+n,"E"+n,"Z"+n,"Y"+n],i=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,i)).toFixed(o))+" "+r[i]},e.ctorParameters=function(){return[{type:d,decorators:[{type:t.Optional},{type:t.Inject,args:[f]}]}]},e=u([t.Pipe({name:"byteFormat"}),p(0,t.Optional()),p(0,t.Inject(f)),s("design:paramtypes",[d])],e)}(),v=function(){function e(){}return e=u([t.NgModule({declarations:[m,b],providers:[n.FocusMonitor],exports:[m,b]})],e)}();(c=e.FileValidator||(e.FileValidator={})).maxContentSize=function(e){return function(t){var n=t&&t.value?t.value.files.map((function(e){return e.size})).reduce((function(e,t){return e+t}),0):0;return e>=n?null:{maxContentSize:{actualSize:n,maxSize:e}}}},c.allowedExtensions=function(e){return function(t){return t&&t.value&&t.value.files.every((function(t){var n=t.name.split("."),o=n[n.length-1];return-1!==e.indexOf(o)}))?null:{allowedExtensions:e}}},e.ByteFormatPipe=b,e.FileInput=y,e.FileInputComponent=m,e.FileInputConfig=d,e.MaterialFileInputModule=v,e.NGX_MAT_FILE_INPUT_CONFIG=f,e.ɵa=h,e.ɵb=g,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-mat-file-input.umd.min.js.map